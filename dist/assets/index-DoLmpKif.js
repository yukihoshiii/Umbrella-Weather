(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(o){if(o.ep)return;o.ep=!0;const t=i(o);fetch(o.href,t)}})();const a={0:{desc:"Clear sky",icon:"â˜€ï¸"},1:{desc:"Mainly clear",icon:"ðŸŒ¤ï¸"},2:{desc:"Partly cloudy",icon:"â›…"},3:{desc:"Overcast",icon:"â˜ï¸"},45:{desc:"Fog",icon:"ðŸŒ«ï¸"},48:{desc:"Depositing rime fog",icon:"ðŸŒ«ï¸"},51:{desc:"Light drizzle",icon:"ðŸŒ¦ï¸"},61:{desc:"Slight rain",icon:"ðŸŒ§ï¸"},63:{desc:"Moderate rain",icon:"ðŸŒ§ï¸"},65:{desc:"Heavy rain",icon:"ðŸŒ§ï¸"},71:{desc:"Slight snow",icon:"â„ï¸"},95:{desc:"Thunderstorm",icon:"â›ˆï¸"}};async function g(e,r,i="celsius"){const s=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${r}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m,surface_pressure,visibility&hourly=temperature_2m,weather_code,precipitation_probability&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max&timezone=auto&temperature_unit=${i}`,t=await(await fetch(s)).json(),c=t.current.weather_code;return{current:{temp:Math.round(t.current.temperature_2m),description:a[c]?.desc||"Unknown",icon:a[c]?.icon||"â“",humidity:t.current.relative_humidity_2m,windSpeed:t.current.wind_speed_10m,feelsLike:Math.round(t.current.apparent_temperature),uvIndex:Math.round(t.daily.uv_index_max[0]),visibility:Math.round(t.current.visibility/1e3),pressure:Math.round(t.current.surface_pressure)},hourly:{time:t.hourly.time.slice(0,24),temp:t.hourly.temperature_2m.slice(0,24).map(Math.round),icon:t.hourly.weather_code.slice(0,24).map(d=>a[d]?.icon||"â“"),precipitation:t.hourly.precipitation_probability.slice(0,24)},daily:{time:t.daily.time,tempMax:t.daily.temperature_2m_max.map(Math.round),tempMin:t.daily.temperature_2m_min.map(Math.round),icon:t.daily.weather_code.map(d=>a[d]?.icon||"â“"),sunrise:t.daily.sunrise,sunset:t.daily.sunset,uvIndexMax:t.daily.uv_index_max}}}let l="celsius",u=null;const n={cityName:document.getElementById("city-name"),currentDate:document.getElementById("current-date"),mainTemp:document.getElementById("main-temp"),weatherDesc:document.getElementById("weather-desc"),highTemp:document.getElementById("high-temp"),lowTemp:document.getElementById("low-temp"),hourlyList:document.getElementById("hourly-list"),dailyList:document.getElementById("daily-list"),app:document.getElementById("app"),settingsBtn:document.getElementById("settings-btn"),settingsModal:document.getElementById("settings-modal"),closeSettings:document.getElementById("close-settings"),unitC:document.getElementById("unit-c"),unitF:document.getElementById("unit-f"),uvIndex:document.getElementById("uv-index"),uvDesc:document.getElementById("uv-desc"),sunrise:document.getElementById("sunrise"),sunsetLabel:document.getElementById("sunset-label"),windSpeed:document.getElementById("wind-speed"),feelsLike:document.getElementById("feels-like"),humidity:document.getElementById("humidity"),visibility:document.getElementById("visibility"),pressure:document.getElementById("pressure")};async function h(){f(),w(),await v()}function f(){const e=new Date;n.currentDate.textContent=e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function w(){n.settingsBtn.onclick=()=>n.settingsModal.classList.remove("hidden"),n.closeSettings.onclick=()=>n.settingsModal.classList.add("hidden"),n.unitC.onclick=()=>m("celsius"),n.unitF.onclick=()=>m("fahrenheit")}async function m(e){l!==e&&(l=e,n.unitC.classList.toggle("active",e==="celsius"),n.unitF.classList.toggle("active",e==="fahrenheit"),u&&await p(u.lat,u.lon))}async function v(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const{latitude:r,longitude:i}=e.coords;u={lat:r,lon:i},await p(r,i),await _(r,i)},()=>{n.cityName.textContent="Location Access Denied"}):n.cityName.textContent="Geolocation not supported"}async function _(e,r){try{const s=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e}&longitude=${r}&localityLanguage=en`)).json();n.cityName.textContent=s.city||s.locality||"Your Location"}catch{n.cityName.textContent="Your Location"}}async function p(e,r){try{const i=await g(e,r,l);x(i),I(i.current.description)}catch(i){console.error("Failed to fetch weather:",i)}}function x(e){n.mainTemp.textContent=e.current.temp.toString(),n.weatherDesc.textContent=`${e.current.icon} ${e.current.description}`,n.highTemp.textContent=e.daily.tempMax[0].toString(),n.lowTemp.textContent=e.daily.tempMin[0].toString(),n.uvIndex.textContent=e.current.uvIndex.toString(),n.uvDesc.textContent=L(e.current.uvIndex),n.sunrise.textContent=y(e.daily.sunrise[0]),n.sunsetLabel.textContent=`Sunset: ${y(e.daily.sunset[0])}`,n.windSpeed.textContent=e.current.windSpeed.toString(),n.feelsLike.textContent=`${e.current.feelsLike}Â°`,n.humidity.textContent=`${e.current.humidity}%`,n.visibility.textContent=`${e.current.visibility} km`,n.pressure.textContent=`${e.current.pressure} hPa`,n.hourlyList.innerHTML=e.hourly.time.map((r,i)=>`
    <div class="hourly-item">
      <span class="time">${new Date(r).getHours()}:00</span>
      <span class="icon">${e.hourly.icon[i]}</span>
      <span class="temp">${e.hourly.temp[i]}Â°</span>
    </div>
  `).join(""),n.dailyList.innerHTML=e.daily.time.map((r,i)=>{const s=new Date(r);return`
      <div class="daily-item">
        <span class="day">${i===0?"Today":s.toLocaleDateString("en-US",{weekday:"short"})}</span>
        <span class="icon">${e.daily.icon[i]}</span>
        <div class="temp-range">
          <span>${e.daily.tempMax[i]}Â°</span> 
          <span style="opacity: 0.5; margin-left: 10px">${e.daily.tempMin[i]}Â°</span>
        </div>
      </div>
    `}).join("")}function L(e){return e<=2?"Low":e<=5?"Moderate":e<=7?"High":e<=10?"Very High":"Extreme"}function y(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function I(e){const r=e.toLowerCase();if(document.body.className="",r.includes("clear")){const i=new Date().getHours();document.body.classList.add(i>6&&i<20?"weather-clear-day":"weather-clear-night")}else r.includes("rain")||r.includes("drizzle")||r.includes("thunderstorm")?document.body.classList.add("weather-rain"):document.body.classList.add("weather-cloudy")}h();
