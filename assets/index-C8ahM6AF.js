(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();const a={0:{desc:"Clear sky",icon:"â˜€ï¸"},1:{desc:"Mainly clear",icon:"ðŸŒ¤ï¸"},2:{desc:"Partly cloudy",icon:"â›…"},3:{desc:"Overcast",icon:"â˜ï¸"},45:{desc:"Fog",icon:"ðŸŒ«ï¸"},48:{desc:"Depositing rime fog",icon:"ðŸŒ«ï¸"},51:{desc:"Light drizzle",icon:"ðŸŒ¦ï¸"},61:{desc:"Slight rain",icon:"ðŸŒ§ï¸"},63:{desc:"Moderate rain",icon:"ðŸŒ§ï¸"},65:{desc:"Heavy rain",icon:"ðŸŒ§ï¸"},71:{desc:"Slight snow",icon:"â„ï¸"},95:{desc:"Thunderstorm",icon:"â›ˆï¸"}};async function h(e,r,i="celsius"){const s=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${r}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m,surface_pressure,visibility&hourly=temperature_2m,weather_code,precipitation_probability&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,uv_index_max&timezone=auto&temperature_unit=${i}`,n=await(await fetch(s)).json(),c=n.current.weather_code;return{current:{temp:Math.round(n.current.temperature_2m),description:a[c]?.desc||"Unknown",icon:a[c]?.icon||"â“",humidity:n.current.relative_humidity_2m,windSpeed:n.current.wind_speed_10m,feelsLike:Math.round(n.current.apparent_temperature),uvIndex:Math.round(n.daily.uv_index_max[0]),visibility:Math.round(n.current.visibility/1e3),pressure:Math.round(n.current.surface_pressure)},hourly:{time:n.hourly.time.slice(0,24),temp:n.hourly.temperature_2m.slice(0,24).map(Math.round),icon:n.hourly.weather_code.slice(0,24).map(l=>a[l]?.icon||"â“"),precipitation:n.hourly.precipitation_probability.slice(0,24)},daily:{time:n.daily.time,tempMax:n.daily.temperature_2m_max.map(Math.round),tempMin:n.daily.temperature_2m_min.map(Math.round),icon:n.daily.weather_code.map(l=>a[l]?.icon||"â“"),sunrise:n.daily.sunrise,sunset:n.daily.sunset,uvIndexMax:n.daily.uv_index_max}}}let d="celsius",u=null;const t={cityName:document.getElementById("city-name"),currentDate:document.getElementById("current-date"),mainTemp:document.getElementById("main-temp"),weatherDesc:document.getElementById("weather-desc"),highTemp:document.getElementById("high-temp"),lowTemp:document.getElementById("low-temp"),hourlyList:document.getElementById("hourly-list"),dailyList:document.getElementById("daily-list"),app:document.getElementById("app"),settingsBtn:document.getElementById("settings-btn"),settingsModal:document.getElementById("settings-modal"),closeSettings:document.getElementById("close-settings"),unitC:document.getElementById("unit-c"),unitF:document.getElementById("unit-f"),uvIndex:document.getElementById("uv-index"),uvDesc:document.getElementById("uv-desc"),sunrise:document.getElementById("sunrise"),sunsetLabel:document.getElementById("sunset-label"),windSpeed:document.getElementById("wind-speed"),feelsLike:document.getElementById("feels-like"),humidity:document.getElementById("humidity"),visibility:document.getElementById("visibility"),pressure:document.getElementById("pressure")};async function g(){f(),w(),await v()}function f(){const e=new Date;t.currentDate.textContent=e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function w(){t.settingsBtn.onclick=()=>t.settingsModal.classList.remove("hidden"),t.closeSettings.onclick=()=>t.settingsModal.classList.add("hidden"),t.unitC.onclick=()=>m("celsius"),t.unitF.onclick=()=>m("fahrenheit"),t.app.addEventListener("touchstart",()=>{t.app.scrollTop===0?t.app.scrollTop=1:t.app.scrollHeight-t.app.scrollTop===t.app.clientHeight&&(t.app.scrollTop=t.app.scrollTop-1)},{passive:!0})}async function m(e){d!==e&&(d=e,t.unitC.classList.toggle("active",e==="celsius"),t.unitF.classList.toggle("active",e==="fahrenheit"),u&&await y(u.lat,u.lon))}async function v(){navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const{latitude:r,longitude:i}=e.coords;u={lat:r,lon:i},await y(r,i),await _(r,i)},()=>{t.cityName.textContent="Location Access Denied"}):t.cityName.textContent="Geolocation not supported"}async function _(e,r){try{const s=await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e}&longitude=${r}&localityLanguage=en`)).json();t.cityName.textContent=s.city||s.locality||"Your Location"}catch{t.cityName.textContent="Your Location"}}async function y(e,r){try{const i=await h(e,r,d);L(i),E(i.current.description)}catch(i){console.error("Failed to fetch weather:",i)}}function L(e){t.mainTemp.textContent=e.current.temp.toString(),t.weatherDesc.textContent=`${e.current.icon} ${e.current.description}`,t.highTemp.textContent=e.daily.tempMax[0].toString(),t.lowTemp.textContent=e.daily.tempMin[0].toString(),t.uvIndex.textContent=e.current.uvIndex.toString(),t.uvDesc.textContent=x(e.current.uvIndex),t.sunrise.textContent=p(e.daily.sunrise[0]),t.sunsetLabel.textContent=`Sunset: ${p(e.daily.sunset[0])}`,t.windSpeed.textContent=e.current.windSpeed.toString(),t.feelsLike.textContent=`${e.current.feelsLike}Â°`,t.humidity.textContent=`${e.current.humidity}%`,t.visibility.textContent=`${e.current.visibility} km`,t.pressure.textContent=`${e.current.pressure} hPa`,t.hourlyList.innerHTML=e.hourly.time.map((r,i)=>`
    <div class="hourly-item">
      <span class="time">${new Date(r).getHours()}:00</span>
      <span class="icon">${e.hourly.icon[i]}</span>
      <span class="temp">${e.hourly.temp[i]}Â°</span>
    </div>
  `).join(""),t.dailyList.innerHTML=e.daily.time.map((r,i)=>{const s=new Date(r);return`
      <div class="daily-item">
        <span class="day">${i===0?"Today":s.toLocaleDateString("en-US",{weekday:"short"})}</span>
        <span class="icon">${e.daily.icon[i]}</span>
        <div class="temp-range">
          <span>${e.daily.tempMax[i]}Â°</span> 
          <span style="opacity: 0.5; margin-left: 10px">${e.daily.tempMin[i]}Â°</span>
        </div>
      </div>
    `}).join("")}function x(e){return e<=2?"Low":e<=5?"Moderate":e<=7?"High":e<=10?"Very High":"Extreme"}function p(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function E(e){const r=e.toLowerCase();if(document.body.className="",r.includes("clear")){const i=new Date().getHours();document.body.classList.add(i>6&&i<20?"weather-clear-day":"weather-clear-night")}else r.includes("rain")||r.includes("drizzle")||r.includes("thunderstorm")?document.body.classList.add("weather-rain"):document.body.classList.add("weather-cloudy")}g();
